<script setup lang="ts">
import { HomeExperience } from "~/experiences/home";

const experience = new HomeExperience();
const visible = ref(false);

const onPress = () => {
	if (!experience?.ui) return;

	if (experience.ui.isMarkersDisplayed) experience.ui.removeMarkers();
	else experience.ui.displayMarks();

	visible.value = experience.ui.isMarkersDisplayed;
};

onMounted(() => {
	if (!process.client) return;

	if (!experience) return;
	visible.value = !!experience.ui?.isMarkersDisplayed;
});
</script>

<template>
	<button @click="onPress" :title="`${visible ? 'Disable' : 'Enable'} Markers`">
		<svg v-if="visible" fill="none" viewBox="0 0 32 32">
			<path
				d="M18.8242 8.42676V3.97071C18.8242 3.18283 18.5112 2.42721 17.9541 1.8701C17.397 1.31298 16.6414 1 15.8535 1H3.97071C3.18283 1 2.42721 1.31298 1.8701 1.8701C1.31298 2.42721 1 3.18283 1 3.97071V12.8828C1 13.6707 1.31298 14.4263 1.8701 14.9834C2.42721 15.5405 3.18283 15.8535 3.97071 15.8535H5.35208C5.84104 15.8535 6.32245 15.9741 6.75361 16.2047C7.18477 16.4353 7.55234 16.7688 7.82371 17.1755L8.42676 18.0816M16.0001 20.3264C16.0001 20.3264 21.0001 19.3264 22.0001 20.8264C23.0001 22.3264 28.0001 20.3264 28.0001 20.3264M16.0001 17.3264C16.0001 17.3264 21.0001 16.3264 22.0001 17.8264C23.0001 19.3264 28.0001 17.3264 28.0001 17.3264M16.0001 23.3264C16.0001 23.3264 21.0001 22.3264 22.0001 23.8264C23.0001 25.3264 28.0001 23.3264 28.0001 23.3264M4.00012 7.32641C4.00012 7.32641 9.00013 6.32641 10.0001 7.82641C11.0001 9.32641 16.0001 7.32641 16.0001 7.32641M4.00012 4.32641C4.00012 4.32641 9.00013 3.32641 10.0001 4.82641C11.0001 6.32641 16.0001 4.32641 16.0001 4.32641M4.00012 10.3264C4.00012 10.3264 9.00013 9.32641 10.0001 10.8264C11.0001 12.3264 16.0001 10.3264 16.0001 10.3264M27.7363 12.8828H15.8535C15.0656 12.8828 14.31 13.1958 13.7529 13.7529C13.1958 14.31 12.8828 15.0656 12.8828 15.8535V24.7656C12.8828 25.5535 13.1958 26.3091 13.7529 26.8662C14.31 27.4234 15.0656 27.7363 15.8535 27.7363H17.2349C17.7239 27.7363 18.2053 27.8569 18.6364 28.0875C19.0676 28.3181 19.4352 28.6516 19.7065 29.0583L20.5591 30.3387C20.6948 30.5421 20.8785 30.7089 21.0941 30.8243C21.3097 30.9396 21.5504 31 21.7949 31C22.0394 31 22.2802 30.9396 22.4958 30.8243C22.7113 30.7089 22.8951 30.5421 23.0308 30.3387L23.8833 29.0598C24.1545 28.6528 24.522 28.319 24.9532 28.0882C25.3844 27.8573 25.8659 27.7364 26.355 27.7363H27.7363C28.5242 27.7363 29.2798 27.4234 29.837 26.8662C30.3941 26.3091 30.7071 25.5535 30.7071 24.7656V15.8535C30.7071 15.0656 30.3941 14.31 29.837 13.7529C29.2798 13.1958 28.5242 12.8828 27.7363 12.8828Z"
				stroke="#F4F7F5"
				stroke-width="1.5"
				stroke-linecap="round"
				stroke-linejoin="round"
			/>
		</svg>

		<svg v-if="!visible" viewBox="0 0 32 32" fill="none">
			<path
				fill-rule="evenodd"
				clip-rule="evenodd"
				d="M1.33977 1.33977C2.03754 0.642002 2.98391 0.25 3.97071 0.25H15.8535C16.8403 0.25 17.7867 0.642002 18.4845 1.33977C19.1822 2.03754 19.5742 2.98391 19.5742 3.97071V8.42676C19.5742 8.84098 19.2384 9.17676 18.8242 9.17676C18.41 9.17676 18.0742 8.84098 18.0742 8.42676V3.97071C18.0742 3.38174 17.8403 2.81689 17.4238 2.40043C17.0073 1.98397 16.4425 1.75 15.8535 1.75H3.97071C3.38174 1.75 2.81689 1.98397 2.40043 2.40043C1.98397 2.81689 1.75 3.38174 1.75 3.97071V12.8828C1.75 13.4718 1.98397 14.0366 2.40043 14.4531C2.81689 14.8696 3.38174 15.1035 3.97071 15.1035H5.35197C5.96433 15.1035 6.56736 15.2545 7.10734 15.5433C7.64735 15.8322 8.10772 16.2498 8.4476 16.7592L9.05112 17.666C9.28062 18.0108 9.18714 18.4764 8.84232 18.7059C8.4975 18.9354 8.03191 18.8419 7.80241 18.4971L7.19982 17.5917C6.997 17.288 6.72198 17.0383 6.39989 16.866C6.07758 16.6936 5.71771 16.6035 5.35219 16.6035H3.97071C2.98391 16.6035 2.03754 16.2115 1.33977 15.5138C0.642002 14.816 0.25 13.8696 0.25 12.8828V3.97071C0.25 2.98391 0.642002 2.03754 1.33977 1.33977ZM13.2226 13.2226C13.9204 12.5248 14.8667 12.1328 15.8535 12.1328H27.7363C28.7231 12.1328 29.6695 12.5248 30.3673 13.2226C31.0651 13.9204 31.4571 14.8667 31.4571 15.8535V24.7656C31.4571 25.7524 31.0651 26.6988 30.3673 27.3966C29.6695 28.0943 28.7231 28.4863 27.7363 28.4863H26.3551C25.9895 28.4864 25.6295 28.5768 25.3072 28.7493C24.9849 28.9219 24.7102 29.1714 24.5075 29.4757L23.6548 30.7547C23.4506 31.0609 23.174 31.3119 22.8496 31.4855C22.5252 31.6592 22.1629 31.75 21.7949 31.75C21.427 31.75 21.0647 31.6592 20.7403 31.4855C20.4158 31.3119 20.1393 31.0609 19.9351 30.7548L19.0826 29.4746C18.8798 29.1705 18.605 28.9212 18.2827 28.7488C17.9604 28.5765 17.6005 28.4863 17.235 28.4863H15.8535C14.8667 28.4863 13.9204 28.0943 13.2226 27.3966C12.5248 26.6988 12.1328 25.7524 12.1328 24.7656V15.8535C12.1328 14.8667 12.5248 13.9204 13.2226 13.2226ZM15.8535 13.6328C15.2646 13.6328 14.6997 13.8668 14.2833 14.2833C13.8668 14.6997 13.6328 15.2646 13.6328 15.8535V24.7656C13.6328 25.3546 13.8668 25.9195 14.2833 26.3359C14.6997 26.7524 15.2646 26.9863 15.8535 26.9863H17.2348C17.8472 26.9863 18.4502 27.1373 18.9902 27.4262C19.5302 27.715 19.9905 28.1326 20.3304 28.6421L21.1831 29.9226C21.2503 30.0233 21.3413 30.1059 21.448 30.163C21.5547 30.2201 21.6739 30.25 21.7949 30.25C21.916 30.25 22.0352 30.2201 22.1419 30.163C22.2486 30.1059 22.3396 30.0233 22.4067 29.9227M22.4067 29.9227L23.2592 28.6439C23.5989 28.1342 24.0592 27.7161 24.5992 27.427C25.1392 27.1378 25.7423 26.9865 26.3548 26.9863H27.7363C28.3253 26.9863 28.8902 26.7524 29.3066 26.3359C29.7231 25.9195 29.9571 25.3546 29.9571 24.7656V15.8535C29.9571 15.2646 29.7231 14.6997 29.3066 14.2833C28.8902 13.8668 28.3253 13.6328 27.7363 13.6328H15.8535"
				fill="#F4F7F5"
			/>
		</svg>
	</button>
</template>
